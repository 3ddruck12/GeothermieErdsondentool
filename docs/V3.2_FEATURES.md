# V3.2 Features - Schnellanleitung

## ğŸ“ .get Dateiformat

### Was ist das .get Format?

Das `.get` Format ist das native Projektformat des Geothermie Erdsonden-Tools. Es speichert **alle** Projektdaten in einer einzigen, menschenlesbaren JSON-Datei:

- âœ… Alle Eingabeparameter
- âœ… Berechnungsergebnisse
- âœ… PVGIS Klimadaten
- âœ… Bohrfeld-Konfigurationen
- âœ… Metadaten (Projektname, Datum, etc.)

### Vorteile

1. **Komplett**: Keine Daten gehen verloren
2. **Versioniert**: Automatische Migration bei Updates
3. **Portabel**: Einfach per E-Mail teilen
4. **Lesbar**: JSON-Format, in jedem Texteditor Ã¶ffenbar
5. **AbwÃ¤rtskompatibel**: V3.0 und V3.1 Dateien werden automatisch migriert

## ğŸ’¾ Projekt speichern

### In der GUI

1. **MenÃ¼**: `Datei` â†’ `Als .get speichern...`
2. **Shortcut**: `Strg+S`
3. Dateiname wÃ¤hlen (z.B. `mein_projekt.get`)
4. âœ… Fertig!

### Tipp
Speichere regelmÃ¤ÃŸig wÃ¤hrend der Arbeit! Das Dateiformat ist sehr kompakt (ca. 5-10 KB pro Projekt).

## ğŸ“¥ Projekt laden

### In der GUI

1. **MenÃ¼**: `Datei` â†’ `.get Projekt laden...`
2. **Shortcut**: `Strg+O`
3. `.get` Datei auswÃ¤hlen
4. âœ… Alle Werte werden automatisch in die GUI geladen!

### Migration Ã¤lterer Versionen

Wenn du eine V3.0 oder V3.1 Datei Ã¶ffnest, wird sie automatisch auf V3.2 migriert:

```
ğŸ”„ Datei wurde von Version 3.1 auf 3.2 migriert
```

Die Originaldatei wird **nicht** verÃ¤ndert - nur beim erneuten Speichern wird die neue Version geschrieben.

## ğŸ”¬ pygfunction Integration

### Was ist pygfunction?

[pygfunction](https://github.com/MassimoCimmino/pygfunction) ist eine wissenschaftliche Python-Bibliothek zur Berechnung von **g-Funktionen** fÃ¼r ErdwÃ¤rmesondenfelder.

### Was sind g-Funktionen?

g-Funktionen beschreiben die **thermische Response** eines Bohrfelds Ã¼ber die Zeit. Sie berÃ¼cksichtigen:

- ğŸŒ¡ï¸ Thermische Interaktion zwischen einzelnen Bohrungen
- â±ï¸ ZeitabhÃ¤ngige Temperaturentwicklung
- ğŸ“Š Langzeit-Simulation (Jahre bis Jahrzehnte)

### WofÃ¼r brauche ich das?

Wenn du **mehrere Bohrungen** planst (Bohrfeld), ist die thermische Interaktion wichtig:

- Bohrungen zu nah â†’ gegenseitige AbkÃ¼hlung â†’ schlechtere Effizienz
- Optimaler Abstand â†’ beste Performance

### Beispiel-Berechnung

```python
from calculations.borefield_gfunction import BorefieldCalculator

calc = BorefieldCalculator()

# 3Ã—2 Rechteck-Feld
result = calc.calculate_gfunction(
    layout="rectangle",
    num_boreholes_x=3,
    num_boreholes_y=2,
    spacing_x=6.5,  # 6.5m Abstand in X
    spacing_y=6.5,  # 6.5m Abstand in Y
    borehole_depth=120.0,
    borehole_radius=0.076,
    soil_thermal_diffusivity=1.0e-6,
    simulation_years=25
)

print(f"Bohrungen: {result['num_boreholes']}")
print(f"Gesamttiefe: {result['total_depth']} m")
print(f"FeldgrÃ¶ÃŸe: {result['field_area']:.1f} mÂ²")
```

### VerfÃ¼gbare Layouts

1. **`rectangle`**: Rechteckiges Feld (hÃ¤ufigster Fall)
   ```
   O O O
   O O O
   ```

2. **`L`**: L-fÃ¶rmiges Feld (bei begrenztem Platz)
   ```
   O O O
   O
   O
   ```

3. **`U`**: U-fÃ¶rmiges Feld
   ```
   O   O
   O   O
   O O O
   ```

4. **`line`**: Einzelne Reihe
   ```
   O O O O O
   ```

### In der GUI (geplant fÃ¼r V3.3)

Aktuell ist pygfunction Ã¼ber Python-Code nutzbar. In V3.3 kommt ein eigener **Bohrfeld-Tab** in die GUI mit:

- ğŸ¨ Visueller Bohrfeld-Designer
- ğŸ“Š g-Funktionen-Plots
- ğŸ” Optimierungs-Assistent

## ğŸ“‹ .get Dateiformat-Spezifikation

### Struktur

```json
{
  "file_format": "GET",
  "format_version": "3.2",
  "created_with": "Geothermie Erdsonden-Tool v3.2.0",
  "created_date": "2026-01-03T15:30:00Z",
  "encoding": "UTF-8",
  
  "metadata": {
    "project_name": "Musterprojekt GmbH",
    "location": "Berlin, Deutschland",
    "designer": "Max Mustermann",
    "date": "2026-01-03",
    "notes": "..."
  },
  
  "ground_properties": { ... },
  "borehole_config": { ... },
  "pipe_properties": { ... },
  "grout_material": { ... },
  "heat_carrier_fluid": { ... },
  "loads": { ... },
  "temperature_limits": { ... },
  "simulation_settings": { ... },
  "climate_data": { ... },
  
  "borefield_v32": {
    "enabled": true,
    "layout": "rectangle",
    "num_boreholes_x": 3,
    "num_boreholes_y": 2,
    "spacing_x_m": 6.5,
    "spacing_y_m": 6.5,
    "soil_thermal_diffusivity": 1.0e-6,
    "simulation_years": 25
  },
  
  "results": { ... }
}
```

### Versionierung

- **V3.0**: Basis-Format
- **V3.1**: `climate_data` hinzugefÃ¼gt
- **V3.2**: `borefield_v32` hinzugefÃ¼gt

Beim Import werden Ã¤ltere Versionen automatisch erweitert:

```
V3.0 â†’ V3.1: + climate_data (null)
V3.1 â†’ V3.2: + borefield_v32 (enabled: false)
```

## ğŸ§ª Programmierung mit .get Dateien

### Export

```python
from utils.get_file_handler import GETFileHandler

handler = GETFileHandler()

success = handler.export_to_get(
    filepath="mein_projekt.get",
    metadata={...},
    ground_props={...},
    borehole_config={...},
    # ... weitere Parameter
)
```

### Import

```python
handler = GETFileHandler()
data = handler.import_from_get("mein_projekt.get")

if data:
    print(f"Projekt: {data['metadata']['project_name']}")
    print(f"Version: {data['format_version']}")
```

### Validierung

```python
valid, message = handler.validate_get_file("projekt.get")
print(message)  # "âœ… GÃ¼ltige GET-Datei (Version 3.2)"
```

### Datei-Info ohne kompletten Import

```python
info = handler.get_file_info("projekt.get")
print(f"Projekt: {info['project_name']}")
print(f"Version: {info['version']}")
print(f"Bohrfeld: {info['has_borefield']}")
```

## â“ HÃ¤ufige Fragen

### Kann ich V3.2 Dateien mit V3.0/3.1 Ã¶ffnen?

**Nein.** Ã„ltere Versionen kennen das neue Format nicht. Aber V3.2 kann alte Dateien Ã¶ffnen und migrieren!

### Gehen meine alten Projekte verloren?

**Nein!** Alle V3.0 und V3.1 Dateien werden automatisch migriert. Die Original-Datei bleibt unverÃ¤ndert.

### Kann ich .get Dateien manuell bearbeiten?

**Ja!** Es ist JSON, also in jedem Texteditor Ã¶ffenbar. Aber Vorsicht:
- Syntax-Fehler â†’ Datei kann nicht geladen werden
- Falsche Werte â†’ Berechnung kann fehlschlagen

### Wie groÃŸ sind .get Dateien?

Typisch **5-10 KB** - sehr kompakt!

### Kann ich Projekte per E-Mail versenden?

**Ja!** Einfach die `.get` Datei anhÃ¤ngen. Der EmpfÃ¤nger braucht nur GET V3.2+.

## ğŸ”® Roadmap

### V3.3 (geplant)
- ğŸ¨ Bohrfeld-Tab mit visuellem Designer
- ğŸ“Š g-Funktionen-Plots in GUI
- ğŸ” Optimierungs-Assistent fÃ¼r Bohrfeld-Layout
- ğŸ“„ Bohrfeld-Grafiken im PDF-Bericht

### V4.0 (Zukunft)
- ğŸŒ Mehrsprachigkeit (EN, FR)
- ğŸ’° Kostenberechnung
- ğŸ¤– KI-gestÃ¼tzte Optimierung
- â˜ï¸ Cloud-Speicherung

## ğŸ“š Weitere Dokumentation

- [README.md](../README.md) - Hauptdokumentation
- [CHANGELOG_V3.2.md](../CHANGELOG_V3.2.md) - Detaillierte Ã„nderungen
- [ROADMAP.md](ROADMAP.md) - Langfristige Planung
- [pygfunction Docs](https://pygfunction.readthedocs.io/) - Externe Doku

## ğŸ’¬ Support

Bei Fragen oder Problemen:

1. [GitHub Issues](https://github.com/3ddruck12/GeothermieErdsondentool/issues)
2. [Discussions](https://github.com/3ddruck12/GeothermieErdsondentool/discussions)
3. Hilfe-MenÃ¼ in der GUI â†’ "V3.2 Features"

